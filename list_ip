---
- name: Using localhost
  hosts: localhost
  gather_facts: false

  tasks:
  
    - name: Get EC2 Info
      amazon.aws.ec2_instance_info:
        region: us-east-1
        filters:
          "tag:Name": "{{ i_name }}"
      register: ec2_name

    - name: Get instance IP addresses.
      debug:
          msg: "{{ item.0 }} | {{ item.1 }}"
      with_together:
        - "{{ ec2_name.instances | map(attribute='tags.Name') | list }}"
        - "{{ ec2_name.instances[0].private_ip_address }}"
